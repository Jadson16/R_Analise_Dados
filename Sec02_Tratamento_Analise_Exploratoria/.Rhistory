source("G:/Meu Drive/1_UFMA/4_Courses/GAPE/PPGDSE/EconomiaTrabalho/Pasta_git_Economia_Trabalho/R_analise_dados/Sec02_Tratamento_Analise_Exploratoria/01_Extracao_Repositorios.R")
source("G:/Meu Drive/1_UFMA/4_Courses/GAPE/PPGDSE/EconomiaTrabalho/Pasta_git_Economia_Trabalho/R_analise_dados/Sec02_Tratamento_Analise_Exploratoria/01_Extracao_Repositorios.R")
source("G:/Meu Drive/1_UFMA/4_Courses/GAPE/PPGDSE/EconomiaTrabalho/Pasta_git_Economia_Trabalho/R_analise_dados/Sec02_Tratamento_Analise_Exploratoria/01_Extracao_Repositorios.R")
# ABRIR ARQUIVO
covid_br <- read.csv('/dados_covid_sp.csv', sep = ";")
# CARREGAR PACOTES
library(dplyr)
# ABRIR ARQUIVO
covid_br <- read.csv('/dados_covid_sp.csv', sep = ";")
# ABRIR ARQUIVO
covid_br <- read.csv('/dados_covid_sp.csv', sep = ";")
# ABRIR ARQUIVO
covid_br <- read.csv('dados/covid_sp.csv', sep = ";")
# ABRIR ARQUIVO
covid_br <- read.csv('dados/dados_covid_sp.csv', sep = ";")
View(covid_sp)
View(covid_br)
covid_sp <- read.csv2('dados_covid_sp.csv', sep = ";", encoding="UTF-8")
covid_sp <- read.csv2('dados/dados_covid_sp.csv', sep = ";", encoding="UTF-8")
View(covid_sp)
head(covid_sp)
# ABRIR ARQUIVO
covid_br <- read.csv('dados/br.csv', sep = ";")
View(covid_br)
covid_sp <- read.csv('dados/dados_covid_sp.csv', sep = ";")
View(covid_sp)
covid_sp_alterado <- rename(covid_sp, municipio = nome_munic)
View(covid_sp_alterado)
# sobrescrevendo e alterando
covid_sp_alterado <- rename(covid_sp_alterado, data = datahora,
rotulo_mapa = map_leg,codigo_mapa = map_leg_s)
View(covid_sp_alterado)
# EXCLUIR UMA COLUNA (POR NOME)
covid_sp_alterado$cod_ra <- NULL
# EXCLUIR UMA COLUNA (POR NÚMERO)
covid_sp_alterado <- select(covid_sp_alterado, -c(21))
# EXCLUIR VÁRIAS COLUNAS (POR NOME)
covid_sp_alterado <- subset(covid_sp_alterado, select = -c(codigo_ibge, cod_drs))
# EXCLUIR VÁRIAS COLUNAS (POR NÚMERO)
covid_sp_alterado <- select(covid_sp_alterado, -c(14,15))
covid_sp_alterado <- select(covid_sp_alterado, -c(17:19))
# EXCLUIR UMA LINHA (POR NÚMERO)
covid_sp_alterado <- slice(covid_sp_alterado, -c(239660))
covid_sp_alterado <- slice(covid_sp_alterado, -c(239661:239666))
# EXCLUIR VÁRIAS LINHAS (POR NOME)
covid_sp_alterado <- covid_sp_alterado %>%
filter(municipio!="Ignorado")
View(covid_sp_alterado)
covid_sp <- read.csv2('dados/dados_covid_sp.csv', sep = ";", encoding="UTF-8")
View(covid_sp)
covid_sp_alterado <- rename(covid_sp, municipio = nome_munic)
library(dplyr)
library(dplyr)
covid_sp_alterado <- rename(covid_sp, municipio = nome_munic)
View(covid_sp_alterado)
# sobrescrevendo e alterando
covid_sp_alterado <- rename(covid_sp_alterado, data = datahora,
rotulo_mapa = map_leg,codigo_mapa = map_leg_s)
View(covid_sp_alterado)
# EXCLUIR UMA COLUNA (POR NOME)
covid_sp_alterado$cod_ra <- NULL
# EXCLUIR UMA COLUNA (POR NÚMERO)
covid_sp_alterado <- select(covid_sp_alterado, -c(21))
# EXCLUIR VÁRIAS COLUNAS (POR NOME)
covid_sp_alterado <- subset(covid_sp_alterado, select = -c(codigo_ibge, cod_drs))
# EXCLUIR VÁRIAS COLUNAS (POR NÚMERO)
covid_sp_alterado <- select(covid_sp_alterado, -c(14,15))
covid_sp_alterado <- select(covid_sp_alterado, -c(17:19))
# EXCLUIR UMA LINHA (POR NÚMERO)
covid_sp_alterado <- slice(covid_sp_alterado, -c(239660))
covid_sp_alterado <- slice(covid_sp_alterado, -c(239661:239666))
# EXCLUIR VÁRIAS LINHAS (POR NOME)
covid_sp_alterado <- covid_sp_alterado %>%
filter(municipio!="Ignorado")
# Verificando valores missing (Ausentes)
# NA = valores ausentes
# NAN = not a number(valor indefinido)
sapply(covid_sp_alterado, function(x) sum(is.na(x)))
View(covid_sp_alterado)
covid_sp_alterado$semana_epidem
summary(covid_sp_alterado$semana_epidem)
sapply(covid_sp_alterado, function(x) sum(is.nan(x)))
########### Função mutate all temporariamente desabilitada ######
if(!require(tidyr)) install.packages("tidyr")
library(tidyr)
covid_sp_alterado2 <- covid_sp_alterado %>%
mutate_all(replace_na, 54)
View(covid_sp_alterado2)
summary(covid_sp_alterado2$semana_epidem)
# Ao inves de substituir por semana colocar ano
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$semana_epidem == 54] <- 2021
View(covid_sp_alterado2)
summary(covid_sp_alterado2$semana_epidem)
# ao inves de substituir por 2021 eu posso colocar as semanas
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '01/01/2021' &
covid_sp_alterado2$data <= '07/01/2021'  ] <- 54
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '08/01/2021' &
covid_sp_alterado2$data <= '14/01/2021'  ] <- 55
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '15/01/2021' &
covid_sp_alterado2$data <= '21/01/2021'  ] <- 56
View(covid_sp_alterado2)
summarise(covid_sp_alterado2$semana_epidem)
summary(covid_sp_alterado2$semana_epidem)
View(covid_sp_alterado2)
# ao inves de substituir por 2021 eu posso colocar as semanas
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '01/01/2021' &
covid_sp_alterado2$data <= '07/01/2021'  ] <- 54
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '08/01/2021' &
covid_sp_alterado2$data <= '14/01/2021'  ] <- 55
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '15/01/2021' &
covid_sp_alterado2$data <= '21/01/2021'  ] <- 56
#VERIFICAÇÃO DA TIPAGEM DOS ATRIBUTOS (Variáveis)
# EXISTEM 7 TIPOS BÁSICOS:
# character (caracteres)
# integer (números inteiros)
# numeric (números reais)
# logical (falso ou verdadeiro)
# complex (números complexos)
# factor (fator: Sequência de valores definidos por níveis)
# date (data)
str(covid_sp_alterado2)
# OU
glimpse(covid_sp_alterado2)
#Transformação da tipagem de atributos
covid_sp_alterado2$semana_epidem <- as.integer(covid_sp_alterado2$semana_epidem)
#Transformação da tipagem de atributos
covid_sp_alterado2$semana_epidem <- as.integer(covid_sp_alterado2$semana_epidem)
glimpse(covid_sp_alterado2)
covid_sp_alterado2$data <- as.Date(covid_sp_alterado2$data, format ='%d/%m/%Y')
glimpse(covid_sp_alterado2)
View(covid_sp_alterado2)
View(covid_sp_alterado2)
# Criando colunas ---------------------------------------------------------
covid_sp_alterado2["idoso(%)"]<-100*covid_sp_alterado2$pop_60/covid_sp_alterado2$pop
View(covid_sp_alterado2)
# ou
covid_sp_alterado2$`idoso(%)` <- NULL
covid_sp_alterado2 <- covid_sp_alterado2 %>%
mutate("idoso(%)" =  100*pop_60/pop)
View(covid_sp_alterado2)
covid_sp_alterado2 <- covid_sp_alterado2 %>%
mutate(log_pop = log(pop))
# Exportação de arquivos --------------------------------------------------
write.table(covid_sp_alterado2, file ="covid_sp_tratado.txt", sep = ",")
# Exportação de arquivos --------------------------------------------------
write.table(covid_sp_alterado2, file ="covid_sp_tratado.csv", sep = ",")
# Opção de exportação de arquivos -----------------------------------------
install.packages("readr", dependencies = TRUE)
library("readr")
write_xlsx(covid_sp_alterado2, "covid_sp_tratado.xlsx")
# outras opções
library(writexl)
write_xlsx(covid_sp_alterado2, "covid_sp_tratado.xlsx")
# BASE DE DADOS TRATADA -------------------------------------------------------
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ";", encoding="UTF-8")
library(dplyr)
covid_sp <- read.csv('dados/dados_covid_sp.csv', sep = ";")
covid_sp <- read.csv2('dados/dados_covid_sp.csv', sep = ";", encoding="UTF-8")
covid_sp_alterado <- rename(covid_sp, municipio = nome_munic)
# sobrescrevendo e alterando
covid_sp_alterado <- rename(covid_sp_alterado, data = datahora,
rotulo_mapa = map_leg,codigo_mapa = map_leg_s)
View(covid_sp_alterado)
# EXCLUIR UMA COLUNA (POR NOME)
covid_sp_alterado$cod_ra <- NULL
# EXCLUIR UMA COLUNA (POR NÚMERO)
covid_sp_alterado <- select(covid_sp_alterado, -c(21))
# EXCLUIR VÁRIAS COLUNAS (POR NOME)
covid_sp_alterado <- subset(covid_sp_alterado, select = -c(codigo_ibge, cod_drs))
# EXCLUIR VÁRIAS COLUNAS (POR NÚMERO)
covid_sp_alterado <- select(covid_sp_alterado, -c(14,15))
covid_sp_alterado <- select(covid_sp_alterado, -c(17:19))
# EXCLUIR UMA LINHA (POR NÚMERO)
covid_sp_alterado <- slice(covid_sp_alterado, -c(239660))
covid_sp_alterado <- slice(covid_sp_alterado, -c(239661:239666))
# EXCLUIR VÁRIAS LINHAS (POR NOME)
covid_sp_alterado <- covid_sp_alterado %>%
filter(municipio!="Ignorado")
View(covid_sp_alterado)
# Verificando valores missing (Ausentes)
# NA = valores ausentes
# NAN = not a number(valor indefinido)
sapply(covid_sp_alterado, function(x) sum(is.na(x)))
sapply(covid_sp_alterado, function(x) sum(is.nan(x)))
if(!require(tidyr)) install.packages("tidyr")
library(tidyr)
covid_sp_alterado2 <- covid_sp_alterado %>%
mutate_all(replace_na, 54)
View(covid_sp_alterado2)
### OPÇÃO 2:
covid_sp_alterado2 <- replace(x = covid_sp_alterado,list = is.na(covid_sp_alterado),
values = 54)
# Ao inves de substituir por semana colocar ano
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$semana_epidem == 54] <- 2021
# ao inves de substituir por 2021 eu posso colocar as semanas
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '01/01/2021' &
covid_sp_alterado2$data <= '07/01/2021'  ] <- 54
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '08/01/2021' &
covid_sp_alterado2$data <= '14/01/2021'  ] <- 55
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '15/01/2021' &
covid_sp_alterado2$data <= '21/01/2021'  ] <- 56
#VERIFICAÇÃO DA TIPAGEM DOS ATRIBUTOS (Variáveis)
# EXISTEM 7 TIPOS BÁSICOS:
# character (caracteres)
# integer (números inteiros)
# numeric (números reais)
# logical (falso ou verdadeiro)
# complex (números complexos)
# factor (fator: Sequência de valores definidos por níveis)
# date (data)
str(covid_sp_alterado2)
# OU
glimpse(covid_sp_alterado2)
#Transformação da tipagem de atributos
covid_sp_alterado2$semana_epidem <- as.integer(covid_sp_alterado2$semana_epidem)
glimpse(covid_sp_alterado2)
covid_sp_alterado2$data <- as.Date(covid_sp_alterado2$data, format ='%d/%m/%Y')
glimpse(covid_sp_alterado2)
# Criando colunas ---------------------------------------------------------
covid_sp_alterado2["idoso(%)"]<-100*covid_sp_alterado2$pop_60/covid_sp_alterado2$pop
View(covid_sp_alterado2)
# ou
covid_sp_alterado2$`idoso(%)` <- NULL # para remorar a coluna criada
covid_sp_alterado2 <- covid_sp_alterado2 %>%
mutate("idoso(%)" =  100*pop_60/pop)
# Exportação de arquivos --------------------------------------------------
write.table(covid_sp_alterado2, file ="covid_sp_tratado.csv", sep = ",")
# Opção de exportação de arquivos -----------------------------------------
install.packages("readr", dependencies = TRUE)
library("readr")
write_delim(covid_sp_alterado2, "covid_sp_tratado.csv", delim = ",")
# outras opções
library(writexl)
write_xlsx(covid_sp_alterado2, "covid_sp_tratado.xlsx")
# Exportação de arquivos --------------------------------------------------
write.table(covid_sp_alterado2, file ="dados/covid_sp_tratado.csv", sep = ",")
# BASE DE DADOS TRATADA -------------------------------------------------------
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ";", encoding="UTF-8")
# BASE DE DADOS TRATADA -------------------------------------------------------
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ";", encoding="UTF-8")
View(covid_sp_tratado)
covid_sp_tratado <- read.csv2('covid_sp_tratado.csv', sep = ",")
# BASE DE DADOS TRATADA -------------------------------------------------------
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ";", encoding="UTF-8")
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ",")
View(covid_sp_tratado)
library(readr)
covid_sp_tratado <- read_csv("dados/covid_sp_tratado.csv")
View(covid_sp_tratado)
covid_sp <- read.csv('dados/dados_covid_sp.csv', sep = ";")
library(dplyr)
View(covid_sp)
covid_sp_alterado <- rename(covid_sp, municipio = nome_munic)
View(covid_sp_alterado)
# sobrescrevendo e alterando
covid_sp_alterado <- rename(covid_sp_alterado, data = datahora,
rotulo_mapa = map_leg,codigo_mapa = map_leg_s)
View(covid_sp_alterado)
# EXCLUIR UMA COLUNA (POR NOME)
covid_sp_alterado$cod_ra <- NULL
# EXCLUIR UMA COLUNA (POR NÚMERO)
covid_sp_alterado <- select(covid_sp_alterado, -c(21))
# EXCLUIR VÁRIAS COLUNAS (POR NOME)
covid_sp_alterado <- subset(covid_sp_alterado, select = -c(codigo_ibge, cod_drs))
# EXCLUIR VÁRIAS COLUNAS (POR NÚMERO)
covid_sp_alterado <- select(covid_sp_alterado, -c(14,15))
covid_sp_alterado <- select(covid_sp_alterado, -c(17:19))
# EXCLUIR UMA LINHA (POR NÚMERO)
covid_sp_alterado <- slice(covid_sp_alterado, -c(239660))
covid_sp_alterado <- slice(covid_sp_alterado, -c(239661:239666))
# EXCLUIR VÁRIAS LINHAS (POR NOME)
covid_sp_alterado <- covid_sp_alterado %>%
filter(municipio!="Ignorado")
View(covid_sp_alterado)
# Verificando valores missing (Ausentes)
# NA = valores ausentes
# NAN = not a number(valor indefinido)
sapply(covid_sp_alterado, function(x) sum(is.na(x)))
sapply(covid_sp_alterado, function(x) sum(is.nan(x)))
if(!require(tidyr)) install.packages("tidyr")
library(tidyr)
covid_sp_alterado2 <- covid_sp_alterado %>%
mutate_all(replace_na, 54)
View(covid_sp_alterado2)
# Ao inves de substituir por semana colocar ano
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$semana_epidem == 54] <- 2021
# ao inves de substituir por 2021 eu posso colocar as semanas
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '01/01/2021' &
covid_sp_alterado2$data <= '07/01/2021'  ] <- 54
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '08/01/2021' &
covid_sp_alterado2$data <= '14/01/2021'  ] <- 55
covid_sp_alterado2$semana_epidem[covid_sp_alterado2$data >= '15/01/2021' &
covid_sp_alterado2$data <= '21/01/2021'  ] <- 56
View(covid_sp_alterado2)
#Transformação da tipagem de atributos
covid_sp_alterado2$semana_epidem <- as.integer(covid_sp_alterado2$semana_epidem)
View(covid_sp_alterado2)
glimpse(covid_sp_alterado2)
covid_sp_alterado2$data <- as.Date(covid_sp_alterado2$data, format ='%d/%m/%Y')
View(covid_sp_alterado2)
glimpse(covid_sp_alterado2)
# Criando colunas ---------------------------------------------------------
covid_sp_alterado2["idoso(%)"]<-100*covid_sp_alterado2$pop_60/covid_sp_alterado2$pop
View(covid_sp_alterado2)
# ou
covid_sp_alterado2$`idoso(%)` <- NULL # para remorar a coluna criada
covid_sp_alterado2 <- covid_sp_alterado2 %>%
mutate("idoso(%)" =  100*pop_60/pop)
View(covid_sp_alterado2)
# Exportação de arquivos --------------------------------------------------
write.table(covid_sp_alterado2, file ="dados/covid_sp_tratado.csv", sep = ",")
# BASE DE DADOS TRATADA -------------------------------------------------------
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ";", encoding="UTF-8")
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ",")
View(covid_sp_tratado)
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ",")
View(covid_sp_tratado)
glimpse(covid_sp_tratado)
covid_sp_tratado <- read.csv('dados/covid_sp_tratado.csv', sep = ",")
View(covid_sp_tratado)
glimpse(covid_sp_tratado)
str(covid_sp_tratado)
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ",")
glimpse(covid_sp_tratado)
covid_sp_tratado$data <- as.Date(covid_sp_tratado$data, format ='%Y-%m-%d')
glimpse(covid_sp_tratado)
covid_sp_tratado$idoso <- as.numeric(covid_sp_tratado$idoso)
glimpse(covid_sp_tratado)
glimpse(covid_sp_tratado)
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ",")
View(covid_sp_tratado)
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ",")
View(covid_sp_tratado)
View(covid_sp_tratado)
covid_sp_tratado <- read.csv('dados/covid_sp_tratado.csv', sep = ",")
View(covid_sp_tratado)
# BASE DE DADOS TRATADA -------------------------------------------------------
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ";", encoding="UTF-8")
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ",")
View(covid_sp_tratado)
glimpse(covid_sp_tratado)
glimpse(covid_sp_tratado)
# CARREGAR PACOTES ----------------------------------------------------------
library(dplyr)
library(rstatix)
glimpse(covid_sp_tratado)
# Fazendo ajustes da base -----------------------------------------------------
covid_sp_tratado$data <- as.Date(covid_sp_tratado$data, format ='%Y-%m-%d')
covid_sp_tratado$idoso <- as.numeric(covid_sp_tratado$idoso)
glimpse(covid_sp_tratado)
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ",")
str(covid_sp_tratado)
covid_sp_tratado$idoso... <- as.numeric(covid_sp_tratado$idoso_pop)
covid_sp_tratado$idoso <- as.numeric(covid_sp_tratado$idoso_pop)
covid_sp_tratado$idoso... <- as.numeric(covid_sp_tratado$idoso...)
str(covid_sp_tratado)
glimpse(covid_sp_tratado)
# Renomeando a coluna idoso
covid_sp_tratado <- rename(covid_sp_tratado, porcentagem_idoso = idoso...)
# Renomeando a coluna idoso
covid_sp_tratado <- rename(covid_sp_tratado, porcentagem_idoso = idoso...)
# CARREGAR PACOTES ----------------------------------------------------------
library(dplyr)
# Renomeando a coluna idoso
covid_sp_tratado <- rename(covid_sp_tratado, porcentagem_idoso = idoso...)
covid_sp_tratado <- read.csv2('dados/covid_sp_tratado.csv', sep = ",")
glimpse(covid_sp_tratado)
# Fazendo ajustes da base -----------------------------------------------------
covid_sp_tratado$data <- as.Date(covid_sp_tratado$data, format ='%Y-%m-%d')
glimpse(covid_sp_tratado)
covid_sp_tratado$idoso... <- as.numeric(covid_sp_tratado$idoso...)
glimpse(covid_sp_tratado)
# Renomeando a coluna idoso
covid_sp_tratado <- rename(covid_sp_tratado, porcentagem_idoso = idoso...)
glimpse(covid_sp_tratado)
glimpse(covid_sp_tratado)
# Campinas
covid_campinas <- covid_sp_tratado |>
filter(municipio=="Campinas")
View(covid_campinas)
View(covid_campinas)
covid_campinas["dens_demografica"] <- covid_campinas$pop/covid_campinas$area
View(covid_campinas)
# análises e erros de medida
covid_campinas["dens_demografica"] <- covid_campinas$pop/covid_campinas$area
View(covid_campinas)
covid_campinas["area"] <- covid_campinas$area/100
View(covid_campinas)
covid_campinas["dens_demografica"] <- covid_campinas$pop/covid_campinas$area
View(covid_campinas)
# Guarulhos (outra forma de filtrar)
covid_guarulhos <- covid_sp_tratado[which(covid_sp_tratado$municipio=="Guarulhos"), ]
View(covid_guarulhos)
covid_guarulhos["area"] <- covid_guarulhos$area/100
covid_guarulhos["dens_demografica"] <- covid_guarulhos$pop/covid_guarulhos$area
View(covid_guarulhos)
